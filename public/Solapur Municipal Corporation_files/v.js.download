var ne,be,M=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},$=function(e){if(document.readyState==="loading")return"loading";var t=M();if(t){if(e<t.domInteractive)return"loading";if(t.domContentLoadedEventStart===0||e<t.domContentLoadedEventStart)return"dom-interactive";if(t.domComplete===0||e<t.domComplete)return"dom-content-loaded"}return"complete"},it=function(e){var t=e.nodeName;return e.nodeType===1?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},ae=function(e,t){var n="";try{for(;e&&e.nodeType!==9;){var i=e,r=i.id?"#"+i.id:it(i)+(i.classList&&i.classList.value&&i.classList.value.trim()&&i.classList.value.trim().length?"."+i.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+r.length>(t||100)-1)return n||r;if(n=n?r+">"+n:r,i.id)break;e=i.parentNode}}catch(o){}return n},Ie=-1,Me=function(){return Ie},P=function(e){addEventListener("pageshow",function(t){t.persisted&&(Ie=t.timeStamp,e(t))},!0)},_=function(){var e=M();return e&&e.activationStart||0},g=function(e,t){var n=M(),i="navigate";return Me()>=0?i="back-forward-cache":n&&(document.prerendering||_()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1000000000000),navigationType:i}},A=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(r){Promise.resolve().then(function(){t(r.getEntries())})});return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(r){}},y=function(e,t,n,i){var r,o;return function(a){t.value>=0&&(a||i)&&((o=t.value-(r||0))||r===void 0)&&(r=t.value,t.delta=o,t.rating=function(s,c){return s>c[1]?"poor":s>c[0]?"needs-improvement":"good"}(t.value,n),e(t))}},oe=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},J=function(e){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e()})},se=function(e){var t=!1;return function(){t||(e(),t=!0)}},k=-1,we=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},z=function(e){document.visibilityState==="hidden"&&k>-1&&(k=e.type==="visibilitychange"?e.timeStamp:0,at())},Ee=function(){addEventListener("visibilitychange",z,!0),addEventListener("prerenderingchange",z,!0)},at=function(){removeEventListener("visibilitychange",z,!0),removeEventListener("prerenderingchange",z,!0)},Pe=function(){return k<0&&(k=we(),Ee(),P(function(){setTimeout(function(){k=we(),Ee()},0)})),{get firstHiddenTime(){return k}}},Q=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},Se=[1800,3000],Ae=function(e,t){t=t||{},Q(function(){var n,i=Pe(),r=g("FCP"),o=A("paint",function(a){a.forEach(function(s){s.name==="first-contentful-paint"&&(o.disconnect(),s.startTime<i.firstHiddenTime&&(r.value=Math.max(s.startTime-_(),0),r.entries.push(s),n(!0)))})});o&&(n=y(e,r,Se,t.reportAllChanges),P(function(a){r=g("FCP"),n=y(e,r,Se,t.reportAllChanges),oe(function(){r.value=performance.now()-a.timeStamp,n(!0)})}))})},Ce=[0.1,0.25],Fe=function(e,t){(function(n,i){i=i||{},Ae(se(function(){var r,o=g("CLS",0),a=0,s=[],c=function(l){l.forEach(function(f){if(!f.hadRecentInput){var w=s[0],O=s[s.length-1];a&&f.startTime-O.startTime<1000&&f.startTime-w.startTime<5000?(a+=f.value,s.push(f)):(a=f.value,s=[f])}}),a>o.value&&(o.value=a,o.entries=s,r())},u=A("layout-shift",c);u&&(r=y(n,o,Ce,i.reportAllChanges),J(function(){c(u.takeRecords()),r(!0)}),P(function(){a=0,o=g("CLS",0),r=y(n,o,Ce,i.reportAllChanges),oe(function(){return r()})}),setTimeout(r,0))}))})(function(n){var i=function(r){var o,a={};if(r.entries.length){var s=r.entries.reduce(function(u,l){return u&&u.value>l.value?u:l});if(s&&s.sources&&s.sources.length){var c=(o=s.sources).find(function(u){return u.node&&u.node.nodeType===1})||o[0];c&&(a={largestShiftTarget:ae(c.node),largestShiftTime:s.startTime,largestShiftValue:s.value,largestShiftSource:c,largestShiftEntry:s,loadState:$(s.startTime)})}}return Object.assign(r,{attribution:a})}(n);e(i)},t)},Ue=function(e,t){Ae(function(n){var i=function(r){var o={timeToFirstByte:0,firstByteToFCP:r.value,loadState:$(Me())};if(r.entries.length){var a=M(),s=r.entries[r.entries.length-1];if(a){var c=a.activationStart||0,u=Math.max(0,a.responseStart-c);o={timeToFirstByte:u,firstByteToFCP:r.value-u,loadState:$(r.entries[0].startTime),navigationEntry:a,fcpEntry:s}}}return Object.assign(r,{attribution:o})}(n);e(i)},t)},xe=0,ee=1/0,W=0,ot=function(e){e.forEach(function(t){t.interactionId&&(ee=Math.min(ee,t.interactionId),W=Math.max(W,t.interactionId),xe=W?(W-ee)/7+1:0)})},Be=function(){return ne?xe:performance.interactionCount||0},st=function(){"interactionCount"in performance||ne||(ne=A("event",ot,{type:"event",buffered:!0,durationThreshold:0}))},h=[],j=new Map,Oe=0,ct=function(){var e=Math.min(h.length-1,Math.floor((Be()-Oe)/50));return h[e]},je=[],ut=function(e){if(je.forEach(function(r){return r(e)}),e.interactionId||e.entryType==="first-input"){var t=h[h.length-1],n=j.get(e.interactionId);if(n||h.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};j.set(i.id,i),h.push(i)}h.sort(function(r,o){return o.latency-r.latency}),h.length>10&&h.splice(10).forEach(function(r){return j.delete(r.id)})}}},ce=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=se(e),document.visibilityState==="hidden"?e():(n=t(e),J(e)),n},Le=[200,500],lt=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Q(function(){var n;st();var i,r=g("INP"),o=function(s){ce(function(){s.forEach(ut);var c=ct();c&&c.latency!==r.value&&(r.value=c.latency,r.entries=c.entries,i())})},a=A("event",o,{durationThreshold:(n=t.durationThreshold)!==null&&n!==void 0?n:40});i=y(e,r,Le,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),J(function(){o(a.takeRecords()),i(!0)}),P(function(){Oe=Be(),h.length=0,j.clear(),r=g("INP"),i=y(e,r,Le,t.reportAllChanges)}))}))},D=[],E=[],re=0,ue=new WeakMap,I=new Map,ie=-1,dt=function(e){D=D.concat(e),Ne()},Ne=function(){ie<0&&(ie=ce(ft))},ft=function(){I.size>10&&I.forEach(function(a,s){j.has(s)||I.delete(s)});var e=h.map(function(a){return ue.get(a.entries[0])}),t=E.length-50;E=E.filter(function(a,s){return s>=t||e.includes(a)});for(var n=new Set,i=0;i<E.length;i++){var r=E[i];He(r.startTime,r.processingEnd).forEach(function(a){n.add(a)})}var o=D.length-1-50;D=D.filter(function(a,s){return a.startTime>re&&s>o||n.has(a)}),ie=-1};je.push(function(e){e.interactionId&&e.target&&!I.has(e.interactionId)&&I.set(e.interactionId,e.target)},function(e){var t,n=e.startTime+e.duration;re=Math.max(re,e.processingEnd);for(var i=E.length-1;i>=0;i--){var r=E[i];if(Math.abs(n-r.renderTime)<=8){(t=r).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},E.push(t)),(e.interactionId||e.entryType==="first-input")&&ue.set(e,t),Ne()});var He=function(e,t){for(var n,i=[],r=0;n=D[r];r++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;i.push(n)}return i},Ve=function(e,t){be||(be=A("long-animation-frame",dt)),lt(function(n){var i=function(r){var o=r.entries[0],a=ue.get(o),s=o.processingStart,c=a.processingEnd,u=a.entries.sort(function(L,rt){return L.processingStart-rt.processingStart}),l=He(o.startTime,c),f=r.entries.find(function(L){return L.target}),w=f&&f.target||I.get(o.interactionId),O=[o.startTime+o.duration,c].concat(l.map(function(L){return L.startTime+L.duration})),q=Math.max.apply(Math,O),nt={interactionTarget:ae(w),interactionTargetElement:w,interactionType:o.name.startsWith("key")?"keyboard":"pointer",interactionTime:o.startTime,nextPaintTime:q,processedEventEntries:u,longAnimationFrameEntries:l,inputDelay:s-o.startTime,processingDuration:c-s,presentationDelay:Math.max(q-c,0),loadState:$(o.startTime)};return Object.assign(r,{attribution:nt})}(n);e(i)},t)},ke=[2500,4000],te={},Re=function(e,t){(function(n,i){i=i||{},Q(function(){var r,o=Pe(),a=g("LCP"),s=function(l){i.reportAllChanges||(l=l.slice(-1)),l.forEach(function(f){f.startTime<o.firstHiddenTime&&(a.value=Math.max(f.startTime-_(),0),a.entries=[f],r())})},c=A("largest-contentful-paint",s);if(c){r=y(n,a,ke,i.reportAllChanges);var u=se(function(){te[a.id]||(s(c.takeRecords()),c.disconnect(),te[a.id]=!0,r(!0))});["keydown","click"].forEach(function(l){addEventListener(l,function(){return ce(u)},{once:!0,capture:!0})}),J(u),P(function(l){a=g("LCP"),r=y(n,a,ke,i.reportAllChanges),oe(function(){a.value=performance.now()-l.timeStamp,te[a.id]=!0,r(!0)})})}})})(function(n){var i=function(r){var o={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:r.value};if(r.entries.length){var a=M();if(a){var s=a.activationStart||0,c=r.entries[r.entries.length-1],u=c.url&&performance.getEntriesByType("resource").filter(function(q){return q.name===c.url})[0],l=Math.max(0,a.responseStart-s),f=Math.max(l,u?(u.requestStart||u.startTime)-s:0),w=Math.max(f,u?u.responseEnd-s:0),O=Math.max(w,c.startTime-s);o={element:ae(c.element),timeToFirstByte:l,resourceLoadDelay:f-l,resourceLoadDuration:w-f,elementRenderDelay:O-w,navigationEntry:a,lcpEntry:c},c.url&&(o.url=c.url),u&&(o.lcpResourceEntry=u)}}return Object.assign(r,{attribution:o})}(n);e(i)},t)},De=[800,1800],mt=function e(t){document.prerendering?Q(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},pt=function(e,t){t=t||{};var n=g("TTFB"),i=y(e,n,De,t.reportAllChanges);mt(function(){var r=M();r&&(n.value=Math.max(r.responseStart-_(),0),n.entries=[r],i(!0),P(function(){n=g("TTFB",0),(i=y(e,n,De,t.reportAllChanges))(!0)}))})},qe=function(e,t){pt(function(n){var i=function(r){var o={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(r.entries.length){var a=r.entries[0],s=a.activationStart||0,c=Math.max((a.workerStart||a.fetchStart)-s,0),u=Math.max(a.domainLookupStart-s,0),l=Math.max(a.connectStart-s,0),f=Math.max(a.connectEnd-s,0);o={waitingDuration:c,cacheDuration:u-c,dnsDuration:l-u,connectionDuration:f-l,requestDuration:r.value-f,navigationEntry:a}}return Object.assign(r,{attribution:o})}(n);e(i)},t)};if(window.visitors)throw Error("Visitors already initialized");var{location:b,document:d}=window,_e=d.currentScript,We="https://e.visitors.now/e",C=_e.getAttribute("data-token");if(!C)throw console.error("[Visitors] Missing data-token attribute on script tag"),Error("Missing data-token");var le=b.hostname;if(le==="localhost"||le==="127.0.0.1"||le.endsWith(".local"))throw console.error("[Visitors] Localhost detected, tracking disabled"),Error("Localhost");var H=_e.hasAttribute("data-persist"),vt=()=>{let e=window.navigator?.globalPrivacyControl===!0,t=window.navigator?.doNotTrack==="1"||window.doNotTrack==="1"||window.navigator?.msDoNotTrack==="1";return e||t},x=vt(),m=null,Je=!1,Y=null,pe=!1,$e=b.href,de=!1,F=null,fe=Date.now(),G=0,T=!0,K=0,me=0,S=null,ve=0,U=!1,p={metrics:{},details:{},navigationId:crypto.randomUUID(),sent:!1},Qe=(e)=>{if(!e)return{};return Object.keys(e).reduce((t,n)=>{let i=e[n];if(i===void 0)return t;return t[n]=i,t},{})},Ye=(e,t)=>{if(e==="cls")return Math.round(t*1e4)/1e4;return Math.round(t)},ht=(e)=>{if(!e)return e;let t=e;while(t.length>1&&t.endsWith("/"))t=t.slice(0,-1);return t},he=(e)=>{if(!e)return"";if(e===d)return"document";if(e.nodeType!==1)return e.nodeName?.toLowerCase?.()||"";let t=[],n=e;while(n&&n.nodeType===1){let i=n.nodeName.toLowerCase();if(n.id)i+=`#${n.id}`;else if(n.classList?.length)i+=`.${Array.from(n.classList).filter(Boolean).join(".")}`;if(t.unshift(i),t.join(">").length>100)break;n=n.parentElement}return t.join(">")},N=(e,t,n,i={})=>{if(e!==p.navigationId)return;if(typeof n!=="number"||Number.isNaN(n))return;let r=Ye(t,n);p.metrics[t]=r,p.details[t]={value:r,attribution:Qe(i)}},v=(e)=>{if(typeof e!=="number"||Number.isNaN(e))return;return Math.round(e)},gt=(e)=>{let t=e?.attribution||{};return{target:he(t.largestShiftTarget),time:v(t.largestShiftTime),value:t.largestShiftValue?Ye("cls",t.largestShiftValue):void 0,source:t.loadState}},yt=(e)=>{let t=e?.attribution||{};return{selector:he(t.element),url:t.url,timeToFirstByte:v(t.timeToFirstByte),resourceLoadDelay:v(t.resourceLoadDelay),resourceLoadTime:v(t.resourceLoadTime),elementRenderDelay:v(t.elementRenderDelay)}},Tt=(e)=>{let t=e?.attribution||{};return{target:he(t.eventTarget),eventType:t.eventType,eventTime:v(t.eventTime),loadState:t.loadState}},bt=(e)=>{let t=e?.attribution||{};return{timeToFirstByte:v(t.timeToFirstByte),firstByteToFCP:v(t.firstByteToFCP),loadState:t.loadState}},wt=(e)=>{let t=e?.attribution||{};return{waitingTime:v(t.waitingTime),dnsTime:v(t.dnsTime),connectionTime:v(t.connectionTime),requestTime:v(t.requestTime)}},Et=()=>{let e=p.navigationId;qe((t)=>{N(e,"ttfb",t.value,wt(t))},{reportAllChanges:!0}),Ue((t)=>{N(e,"fcp",t.value,bt(t))},{reportAllChanges:!0}),Re((t)=>{N(e,"lcp",t.value,yt(t))},{reportAllChanges:!0}),Fe((t)=>{N(e,"cls",t.value,gt(t))},{reportAllChanges:!0}),Ve((t)=>{let n=t.value<0?0:t.value;N(e,"inp",n,Tt(t))},{reportAllChanges:!0})},Ge=()=>{p.metrics={},p.details={},p.sent=!1,p.navigationId=crypto.randomUUID(),Et()},St=(e,t)=>{let n;return(...i)=>{if(!n)e(...i),n=!0,setTimeout(()=>{n=!1},t)}},ge=()=>{if(U)return;U=!0,S=Date.now()},Z=()=>{if(!U||!S)return;U=!1,ve+=Date.now()-S,S=null},Ke=()=>{let e=ve;if(U&&S)e+=Date.now()-S;return e},Ct=()=>{U=!1,S=null,ve=0},Lt=()=>{let e=window.scrollY||d.documentElement.scrollTop,t=window.innerHeight,n=Math.max(d.body.scrollHeight,d.documentElement.scrollHeight);return Math.round((e+t)/n*100)},kt=()=>{if(x)return!1;if(H&&!Je)return!1;if(pe||window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)return!1;return!0},B=(e,t)=>{if(!kt())return;let n=JSON.stringify({action:e,payload:t});if(navigator.sendBeacon?.(We,n))return;fetch(We,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:n,keepalive:!0}).then((i)=>{if(i.status===400)pe=!0}).catch(()=>{})},ye=()=>{if(V(),!T||!F)return;me=Ke(),Y=setInterval(()=>{R()},15000)},V=()=>{if(!Y)return;clearInterval(Y),Y=null},X=()=>{if(p.sent)return;if(Object.keys(p.metrics).length===0)return;p.sent=!0;let e={id:crypto.randomUUID(),projectToken:C,url:b.href,connection:window.navigator?.connection?.effectiveType||null,navigationType:Mt(),properties:At(),...p.metrics};B("performance",e)},Dt=()=>{if(H&&!m)return;let e={id:crypto.randomUUID(),projectToken:C,type:"pageview",url:b.href,referrer:d.referrer||null,properties:{}};if(F=Date.now(),fe=F,G=0,K=0,Ct(),T)ge();if(m)e.profileId=m;B("track",e)},Te=()=>{setTimeout(()=>{if(Dt(),d.visibilityState!=="visible")return;ye()},1)},It=()=>{if(!F)return;let e=Ke(),t=Math.max(0,e-me);if(t<=0)return;me=e;let n={id:crypto.randomUUID(),projectToken:C,url:b.href,duration:t};if(m)n.profileId=m;B("heartbeat",n)},R=()=>{if(!T||!F)return!1;let e=Date.now();if(e-fe<2000)return!1;return It(),fe=e,!0},Mt=()=>{let e=window.performance?.getEntriesByType?.("navigation")?.[0];if(d.prerendering)return"prerender";if(d.wasDiscarded)return"restore";return e?.type||"navigate"},Pt=()=>{return Qe({deviceMemory:window.navigator?.deviceMemory??null,saveData:window.navigator?.connection?.saveData??null})},At=()=>({...p.details,...Pt()}),Ft=(e)=>{if(x)return;if(!e||!e.id){console.error("visitors.identify requires an object with an 'id' field");return}let{id:t,name:n,email:i,...r}=e,o={url:b.href,profileId:t,projectToken:C,referrer:d.referrer||null,properties:r};if(t!==m)o.previousProfileId=m;if(n)o.name=n;if(i)o.email=i;m=t,B("identify",o),et(m)},Ut=(e)=>{if(!e||typeof e!=="object")return;for(let[t,n]of Object.entries(e))if(typeof n!=="string"&&typeof n!=="number"&&typeof n!=="boolean")return console.error(`visitors.track: property "${t}" must be a string, number, or boolean`),null;return Object.keys(e).length>0?e:void 0},Xe=(e,t={})=>{if(x)return;if(!e||typeof e!=="string"){console.error("visitors.track requires a valid event name as the first parameter");return}let n=Ut(t);if(n===null)return;if(H&&!m)return;let i={id:crypto.randomUUID(),projectToken:C,type:"custom",url:b.href,referrer:d.referrer||null,properties:{event:e,custom:n}};if(m)i.profileId=m;B("track",i)},Ze=()=>{let e=T;if(T=d.visibilityState==="visible",de&&T){de=!1,Te();return}if(!e&&T){ge(),ye();return}if(!e||T)return;X(),Z(),V()},xt=()=>{if(!T)return;ge(),ye(),R()},Bt=()=>{Z(),V(),R()},Ot=(e)=>{if(e<25)return 0;if(e>=100)return 100;return e-e%25},jt=()=>{if(!T)return;let e=Lt();if(e<=G)return;G=e;let t=Ot(e);if(t<=K)return;if(!R())return;K=t},ze=()=>{let e=b.href;if($e===e)return;if(X(),Z(),V(),F=null,$e=e,pe=!1,G=0,K=0,Ge(),d.visibilityState==="visible"){Te();return}de=!0},Nt=(e)=>{if(H&&!m)return;let t=ht(e),n={id:crypto.randomUUID(),type:"outbound",projectToken:C,url:b.href,referrer:d.referrer||null,properties:{destination:t}};if(m)n.profileId=m;B("track",n)},Ht=(e)=>{let t=e.target.closest("a");if(!t||!t.href)return;try{let n=new URL(t.href),i=new URL(b.href);if(n.hostname===i.hostname)return;let r=n.pathname;if(r!=="/"&&r.endsWith("/"))r=r.slice(0,-1);let o=`${n.protocol}//${n.hostname}${r}`;Nt(o)}catch{}},Vt=(e)=>{let t={};for(let n of e.attributes){if(!n.name.startsWith("data-visitors-"))continue;if(n.name==="data-visitors-event")continue;t[n.name.slice(14)]=n.value}return Object.keys(t).length>0?t:void 0},Rt=(e)=>{let t=e.target.closest("[data-visitors-event]");if(!t)return;let n=t.getAttribute("data-visitors-event")?.trim();if(!n)return;Xe(n,Vt(t))},qt=()=>{if(x)return;let e=history.pushState;history.pushState=function(...t){e.apply(this,t),ze()},d.addEventListener("visibilitychange",Ze),d.addEventListener("click",Ht),d.addEventListener("click",Rt),window.addEventListener("popstate",ze),window.addEventListener("focus",xt),window.addEventListener("blur",Bt),window.addEventListener("scroll",St(jt,1000)),window.addEventListener("beforeunload",()=>{X(),Z(),V(),R()}),window.addEventListener("pagehide",()=>{X()})},et=(e)=>{d.cookie=`visitor=${e}; path=/; max-age=31536000; secure; samesite=lax`},tt=()=>{let e=d.cookie.split("; ").find((n)=>n.startsWith("visitor="));if(!e)return null;return e.split("=")[1]||null},Wt=(e)=>{return et(e),tt()===e};m=tt()||null;if(!x&&H){if(!m){if(m=crypto.randomUUID(),!Wt(m))throw console.log("[Visitors] Cookies disabled, tracking disabled"),Error("Cookies disabled")}}if(!x){if(Je=!0,qt(),Ge(),!d.wasDiscarded)if(d.visibilityState==="prerender")d.addEventListener("visibilitychange",Ze);else Te()}window.visitors={identify:Ft,track:Xe};
